[{"id":0,"href":"/zh/docs/ltclight/light_types/polygon_light/","title":"多边形光源","section":"LTC 光源类型","content":"多边形光源# 多边形光源适用于模拟单色面光源，例如室内场景的窗户、室外的自发光造型等。\n多边形光源的形状由一组多边形顶点定义，你可以使用预设多边形来修改其形状。\n也可以为其自定义形状。\n多边形形状的中心应与transform 一致。\n建议设置的多边形顶点为共面的（即二维多边形）。\n属性说明# Range（范围）\n指包围球的半径，球体范围外的区域不会被该光源照亮。\nDouble Sided（双面发光）\n启用双面发光的光源会同时照亮多边形的正面和背面；若不启用，则仅正面会被照亮。\nPolygonPoints（多边形顶点）\n你可以为该属性指定一组自定义多边形的顶点数据，这些顶点需构成二维多边形，且中心要与变换位置重合。\n正面方向向量 \\( \\vec {f} \\) 由中心点 \\( o \\)（若使用世界坐标则为原点，否则为 transform 位置）和多边形顶点计算得出。其中 \\( a \\) 和 \\( b \\) 是多边形上两个连续的顶点。 计算公式：\n\\( \\vec {f}=\\vec {oa} \\times \\vec {ob} \\)Preset（预设形状）\n包含多种预设多边形形状，如五边形、六边形等。该属性是为了方便操作而设计的编辑器专属属性，在运行时不可使用。\n"},{"id":1,"href":"/zh/docs/ltclight/sample/","title":"示例","section":"LTC 实时面光源","content":"示例# 该资源包内包含两个示例，你可以在包管理器的示例标签页中导入并体验。\nSamples 标签似乎只有是 import from disk 导入的 package 才会显示，对于直接从 Asset Store 下载的 package 没有这个标签。\n若未显示示例标签页，你也可以将 Realtime Area Lights/Samples~ 文件夹复制到 Assets 目录下。\nShader Graph 示例# 本示例展示了如何自定义Shader Graph，使其支持 LTC 光照。\n进入 Play 模式后，光源生成器会在随机位置随机生成多边形光源或线性光源；同时场景中还存在一个顶点实时变化的多边形光源，以此演示如何在运行时设置多边形光源的形状。\nShader 代码示例# 本示例展示了如何自定义手写着色器，使其支持 LTC 光照。\n其中的亮点功能，是通过线性光源结合物理射线检测模拟实现的激光束效果。Play 模式下，激光束会进行旋转，并被障碍物遮挡截断。\n"},{"id":2,"href":"/zh/docs/ltclight/integration/","title":"集成到项目","section":"LTC 实时面光源","content":"集成到项目# 无论你使用的是自定义渲染管线（SRP） 还是官方的通用渲染管线（URP），本工具在Shader Graph 和手写着色器代码两种开发方式下的集成流程都极为简便。\n本工具集在多数情况下是独立于渲染管线运行的。其工作原理是从渲染管线中提取粗糙度、法线、金属度等表面参数，完成光照计算后，再将计算结果叠加到原始渲染输出上。\n添加 LTCLightManager# 若要使用 LTC 光照，场景中必须且只能存在一个LTCLightManager实例。你可以创建一个空游戏对象，然后为其添加LTCLightManager组件。\nPrefilterTexture着色器的路径如下：\nReal Time Area Lights/Shaders/PrefilterTexture.shader. 该着色器用于纹理面光源功能，需将其指定给LTCLightManager组件。\n你也可以直接使用预制件 Prefabs/LTCManager.prefab，无需额外配置。\n着色器修改# 下一步需要对着色器进行简单修改，使材质能够接收 LTC 光照。\nShader Graph# 目前无法直接拦截片段着色器阶段的光照计算流程，但可以将 LTC 附加光照的计算结果连接到自发光通道（Emission Channel），该通道的输出最终会叠加到整体光照结果中。\n操作方法：在 Shader Graph 中创建一个 LTCLighting 节点（该节点已包含在本工具集中），为其接入与Fragment block 几乎完全一致的输入，最后将节点输出连接 Fragment Block 的自发光端口。 参考 ShaderGraph 示例.\nShader 代码# 对于手写的着色器，扩展 LTC 光照支持同样便捷。工具集已提供辅助函数，可将 URP 标准光照着色器的输入参数转换为 LTC 光照所需的格式 —— 实际上二者的参数结构基本一致。\n以 URP 标准光照着色器为例，首先在LitForwardPass.hlsl文件中引入 LTC 着色器头文件：\n#include \u0026#34;Packages/com.petabytes.ltclight/Shaders/LTC_URP.hlsl\u0026#34;然后在 URP 的 PBR 光照计算完成后，添加 LTC 光照的计算逻辑：\n// For example in LitForwardPass.hlsl InitializeBakedGIData(input, inputData); half4 color = UniversalFragmentPBR(inputData, surfaceData); // Add LTC lighting here color.rgb += CalculateFragmentLTC(inputData, surfaceData);参考 Shader 代码示例.\n添加 LTC 光照组件# 最后一步，在场景中创建所需的 LTC 光源即可。\n你可以创建一个空的 GameObject，然后在上面添加 LTC 光源组件，有三种组件可以添加：\nLTC Linear Light\nLTC Polygon Light\nLTC Textured Light:\nLTC Light 是上面三种组件的基类，无法直接使用。\n或者你也可以直接使用 Real Time Area Lights/Prefabs 路径中的 prefab:\n自定义渲染管线适配说明# 若使用自定义渲染管线，你需要提供与 URP 中inputData和surfaceData数据结构一致的参数，然后参照Shader 代码的方式修改着色器。\nSpecular 和 Metallic 工作流适配# 在资源制作过程中，你可能会使用高光工作流或金属度工作流，本工具集对两种工作流均提供良好支持：\nURP Shader Graph 若在 URP 着色器图中集成，需根据当前使用的工作流，将 LTC 光照节点连接到对应的输入通道。\nURP Shader Code 若在 URP 着色器代码中集成，URP 标准着色器已内置对两种工作流的兼容逻辑，无需额外操作。\nCustomized Render Pipeline 若使用自定义渲染管线，在向 LTC 光照计算函数传递表面参数时，需自行完成金属度与高光参数之间的格式转换，可参考 URP 的InitializeBRDFData函数的实现逻辑。\n"},{"id":3,"href":"/zh/docs/ltclight/light_types/","title":"LTC 光源类型","section":"LTC 实时面光源","content":"LTC 面光源# 当前该资源包支持多边形光源、线性光源和带纹理面光源。未来还将新增更多光源类型，例如贝塞尔曲线形状的面光源。\n属性说明# 以下是所有光源类型的通用属性：\nColor（颜色）\n光源的 RGB 颜色值。\n对于带纹理的光源，该颜色会与纹理自身的颜色进行相乘叠加。\n高光/漫反射强度（Specular|Diffuse Intensity）\n光源强度是光照计算结果的乘数因子，由漫反射强度和高光强度两部分组成，二者可独立调节。\nRange（作用范围）\n光源影响的空间范围，该参数在不同光源类型下的含义有所区别。此范围不受对象缩放变换的影响，选中光源对象后，可在场景视图中通过 Gizmo 直观查看作用范围。\nLight Mode（光照模式）\n光照计算包含两个核心部分：漫反射光照与高光反射光照。尽管这两项计算结果会受材质金属度属性的调节，但你仍可根据特殊需求，选择仅启用漫反射、仅启用高光反射，或同时启用两种光照模式。\n高光 + 漫反射模式\n仅漫反射模式\n仅高光反射模式\nUse World Position（使用世界坐标）\n设置光源顶点的坐标空间：勾选后使用世界空间，此时对象的transform 会被忽略；未勾选时使用对象局部空间。该选项适用于光源顶点基于世界空间的场景，例如 着色器代码示例 中的激光束效果。\n"},{"id":4,"href":"/zh/docs/ltclight/global_config/","title":"全局配置","section":"LTC 实时面光源","content":"全局配置# 在这个package 导入后，它会自动创建一个全局的配置文件 Assets/RealTimeAreaLights/ltcconfig.asset, 以及一个 hlsl 的头文件 ltcconfig.hlsl.\nltcconfig.asset 上有一些选项用于打开关闭部分功能或者效果。\nltcconfig.hlsl 是根据 ltcconfig.asset 的选项自动生成的, 要确保点击 Regenerate Config HLSL 按钮来使得配置选项的修改生效。\nltcconfig.hlsl 被本资源包的 shader 所引用，不要移除或者改变它的路径，否则会导致 shader 编译错误。\nEnable Polygon/Linear/Textured Light# 如果在你的场景中从未使用某些光源类型，你可以把它们关掉，这样一部分 shader 代码会被宏定义所屏蔽。通过这个方式可以尽量减少 shader 的指令数量，有助于提升 GP U的性能。\nTextured Flip Horizontal# 这个选项会在水平方向翻转纹理光源的效果，如果你发现纹理光源的反射和对应的贴图矩形相反，可以调整这个选项。\nUse Perceptual Roughness# 影响粗糙度的计算，perceptual roughness 等于 roughness 的平方，它比 roughness 变化更快，根据你的习惯选择使用哪种粗糙度计算。\n"},{"id":5,"href":"/zh/docs/ltclight/","title":"LTC 实时面光源","section":"Docs","content":"使用指南# WebGL demo.\n视频教程.\n本文档将指导你使用实时面光源插件包。该插件包扩展了 Unity 的光照系统，使其支持面光源功能。以下是不同光源类型的效果展示：\n多边形光源： 线光源： 带纹理光源： 面光源# 传统光照计算会将光源抽象为空间中某一位置上无体积的点（如聚光灯、点光源等），或是处于无限远处的光源（如平行光）。这种抽象简化了实时图形学的光照计算流程。\n但现实世界中的光源并非无限小，当光源体积相对较大时，这种抽象模型与真实效果的差异会变得十分明显。要实现视觉上精准的光照效果，光照算法往往需要用到蒙特卡洛积分这类计算成本极高的方法，而这并不适用于实时应用场景。\n线性变换余弦函数# 线性变换余弦函数（LTC）为我们提供了一种解析解近似面光源的方法，能够在常数时间内得到可信度较高的光照计算结果。\n该方法的提出者发现，我们已经拥有一套针对余弦球面分布的多边形积分解析解，但余弦分布仅适用于漫反射表面的光照计算。\n更进一步，他们创新性地引入矩阵变换，将余弦分布转换为基于物理的光照反射分布（PBR BRDF）（近似转换）。换句话说，我们可以通过逆变换，将基于物理的光照反射分布转换为存在解析解的余弦球面分布。\n最终，我们将多边形从基于物理的光照反射分布空间，变换到余弦球面分布空间中，再执行多边形积分的解析计算即可。\n"},{"id":6,"href":"/zh/docs/ltclight/light_types/textured_light/","title":"纹理面光源","section":"LTC 光源类型","content":"纹理面光源# 纹理光源本质上是一种矩形面光源，区别在于它并非单色光源。\n光源上每个采样点的辐射亮度由纹理中对应纹素的颜色决定。这一特性极大地拓展了面光源的应用场景，因为现实世界中绝大多数面光源都带有丰富色彩，例如广告牌、电子屏幕等。\n为了模拟材质表面的粗糙质感，我们会采用不同尺寸的高斯模糊核对纹理进行预滤波处理，并将处理后的结果存储在纹理的 Mipmap 中。对于静态纹理，预滤波操作可在初始一次性完成；而对于实时变化的RenderTexture，则需要每帧执行预滤波。\n所有经过预滤波处理的纹理结果，都会被存储在一张纹理图集内。该图集的分辨率为 2048×2048，内部划分为 4×4 的单元格网格，每个单元格用于存放一张纹理的预滤波数据。\n目前所有纹理对应的单元格尺寸均为固定值。这意味着无论原始纹理的分辨率和宽高比如何，都会被拉伸到 512×512 的单元格中。对于分辨率超过 512×512 的纹理而言，其过高的分辨率并不会对纹理光源的最终效果产生任何增益。\n若原始纹理的宽高比与 1:1 相差过大，生成的纹理光源可能会在某一维度上出现分辨率损失的问题。\n未来需实现一套更灵活的图集分配算法，以适配不同分辨率和宽高比的纹理资源。\n属性说明# IsRealTime（是否实时滤波）\n若设为 true，纹理预滤波操作将逐帧执行，这会带来额外的性能开销。该属性适用于内容持续变化的场景，例如视频纹理。\n对于静态纹理，务必将 IsRealTime 设为 false，否则会造成不必要的性能浪费。\nTexture（纹理资源）\n指定当前纹理光源所使用的纹理，既可以是静态的 Texture2D 纹理资源，也可以是运行时动态生成的 RenderTexture 渲染纹理。\n如果 Texture 设置为 None，纹理光源会使用默认的 white texture，表现与矩形面光源一致。你仍然可以调整它的颜色。\nWidth（宽度）\n纹理光源的物理宽度。\nHeight（高度）\n纹理光源的物理高度。\nBarn Door\n纹理光源有一个特殊的挡光板属性，它控制光源周围的一圈挡光板，影响光源的照明区域大小。\nBarn Door Length 是挡光板的长度，长度越长遮挡的光照越多。\nBarn Door Angle 是挡光板的角度，范围在0 到 90度。\n"},{"id":7,"href":"/zh/docs/ltclight/light_types/linear_light/","title":"线光源","section":"LTC 光源类型","content":"线光源# 线光源用于模拟呈线条形态的光线，例如激光束、光剑、光带等。\n其形态与多边形光源略有区别，线光源的形态仅由两点决定：起点和终点，光照范围呈胶囊状。\n属性说明# Range（照射范围）\n胶囊状区域的半径，决定了两端半球与中间柱体的半径大小，胶囊区域外的范围不会被照亮。\nStart Point（起点）\n线光源的起始端点，同时也是起始端半球的球心。\nEnd Point（终点）\n线光源的终止端点，同时也是终止端半球的球心。\nRadius（光源半径）\n与照射范围（Range） 无关联，指的是线光源本身的粗细，光源越粗，亮度越高。\n"}]