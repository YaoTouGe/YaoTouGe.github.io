<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>LTC 实时面光源 on PetaBytes</title><link>http://yaotouge.github.io/zh/docs/ltclight/</link><description>Recent content in LTC 实时面光源 on PetaBytes</description><generator>Hugo</generator><language>zh</language><atom:link href="http://yaotouge.github.io/zh/docs/ltclight/index.xml" rel="self" type="application/rss+xml"/><item><title>示例</title><link>http://yaotouge.github.io/zh/docs/ltclight/sample/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/sample/</guid><description>&lt;h2 id="示例"&gt;示例&lt;a class="anchor" href="#%e7%a4%ba%e4%be%8b"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;该资源包内包含两个示例，你可以在包管理器的示例标签页中导入并体验。&lt;/p&gt;
&lt;blockquote class='book-hint note'&gt;
&lt;p&gt;Samples 标签似乎只有是 import from disk 导入的 package 才会显示，对于直接从 Asset Store 下载的 package 没有这个标签。&lt;/p&gt;&lt;/blockquote&gt;&lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/package_sample_tab.png" alt="示例标签页"loading="lazy"title="示例标签页" /&gt;
&lt;/label&gt;
&lt;p&gt;若未显示示例标签页，你也可以将 &lt;code&gt;Realtime Area Lights/Samples~&lt;/code&gt; 文件夹复制到 Assets 目录下。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/samples_dir.png" alt="示例目录"loading="lazy"title="示例目录" /&gt;
&lt;/label&gt;
&lt;h3 id="shader-graph-示例"&gt;Shader Graph 示例&lt;a class="anchor" href="#shader-graph-%e7%a4%ba%e4%be%8b"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;本示例展示了如何自定义Shader Graph，使其支持 LTC 光照。&lt;/p&gt;
&lt;p&gt;进入 Play 模式后，光源生成器会在随机位置随机生成多边形光源或线性光源；同时场景中还存在一个顶点实时变化的多边形光源，以此演示如何在运行时设置多边形光源的形状。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/shadergraph_demo.png" alt="着色器图演示"loading="lazy"title="着色器图演示" /&gt;
&lt;/label&gt;
&lt;h3 id="shader-代码示例"&gt;Shader 代码示例&lt;a class="anchor" href="#shader-%e4%bb%a3%e7%a0%81%e7%a4%ba%e4%be%8b"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;本示例展示了如何自定义手写着色器，使其支持 LTC 光照。&lt;/p&gt;
&lt;p&gt;其中的亮点功能，是通过线性光源结合物理射线检测模拟实现的激光束效果。Play 模式下，激光束会进行旋转，并被障碍物遮挡截断。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-3"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-3" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/shadercode_demo.png" alt="着色器代码演示"loading="lazy"title="着色器代码演示" /&gt;
&lt;/label&gt;</description></item><item><title>集成到项目</title><link>http://yaotouge.github.io/zh/docs/ltclight/integration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/integration/</guid><description>&lt;h2 id="集成到项目"&gt;集成到项目&lt;a class="anchor" href="#%e9%9b%86%e6%88%90%e5%88%b0%e9%a1%b9%e7%9b%ae"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;无论你使用的是自定义渲染管线（SRP） 还是官方的通用渲染管线（URP），本工具在Shader Graph 和手写着色器代码两种开发方式下的集成流程都极为简便。&lt;/p&gt;
&lt;blockquote class='book-hint note'&gt;
&lt;p&gt;本工具集在多数情况下是独立于渲染管线运行的。其工作原理是从渲染管线中提取粗糙度、法线、金属度等表面参数，完成光照计算后，再将计算结果叠加到原始渲染输出上。&lt;/p&gt;&lt;/blockquote&gt;&lt;div class="book-steps"&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h3 id="添加-ltclightmanager"&gt;添加 LTCLightManager&lt;a class="anchor" href="#%e6%b7%bb%e5%8a%a0-ltclightmanager"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;若要使用 LTC 光照，场景中必须且只能存在一个&lt;code&gt;LTCLightManager&lt;/code&gt;实例。你可以创建一个空游戏对象，然后为其添加&lt;code&gt;LTCLightManager&lt;/code&gt;组件。&lt;/p&gt;
 &lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/LTCLightManager.png" alt="LTCLightManager"loading="lazy"title="LTCLightManager" /&gt;
 &lt;/label&gt;
&lt;p&gt;PrefilterTexture着色器的路径如下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Real Time Area Lights/Shaders/PrefilterTexture.shader&lt;/code&gt;. 该着色器用于纹理面光源功能，需将其指定给LTCLightManager组件。&lt;/p&gt;
&lt;p&gt;你也可以直接使用预制件 Prefabs/LTCManager.prefab，无需额外配置。&lt;/p&gt;
 &lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/LTCLightManager_prefab.png" alt="LTCLightManager Prefab"loading="lazy"title="LTCLightManager Prefab" /&gt;
 &lt;/label&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h3 id="着色器修改"&gt;着色器修改&lt;a class="anchor" href="#%e7%9d%80%e8%89%b2%e5%99%a8%e4%bf%ae%e6%94%b9"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;下一步需要对着色器进行简单修改，使材质能够接收 LTC 光照。&lt;/p&gt;
&lt;h4 id="shader-graph"&gt;Shader Graph&lt;a class="anchor" href="#shader-graph"&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;目前无法直接拦截片段着色器阶段的光照计算流程，但可以将 LTC 附加光照的计算结果连接到自发光通道（Emission Channel），该通道的输出最终会叠加到整体光照结果中。&lt;/p&gt;
 &lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/shadergraph_sample.png" alt="shadergraphsample"loading="lazy"title="shadergraphsample" /&gt;
 &lt;/label&gt;
&lt;p&gt;操作方法：在 Shader Graph 中创建一个 LTCLighting 节点（该节点已包含在本工具集中），为其接入与Fragment block 几乎完全一致的输入，最后将节点输出连接 Fragment Block 的自发光端口。 &lt;a href="http://yaotouge.github.io/zh/docs/ltclight/sample/#shader-graph-%e7%a4%ba%e4%be%8b"&gt;参考 ShaderGraph 示例&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id="shader-代码"&gt;Shader 代码&lt;a class="anchor" href="#shader-%e4%bb%a3%e7%a0%81"&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;对于手写的着色器，扩展 LTC 光照支持同样便捷。工具集已提供辅助函数，可将 URP 标准光照着色器的输入参数转换为 LTC 光照所需的格式 —— 实际上二者的参数结构基本一致。&lt;/p&gt;
&lt;p&gt;以 URP 标准光照着色器为例，首先在LitForwardPass.hlsl文件中引入 LTC 着色器头文件：&lt;/p&gt;</description></item><item><title>全局配置</title><link>http://yaotouge.github.io/zh/docs/ltclight/global_config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/global_config/</guid><description>&lt;h2 id="全局配置"&gt;全局配置&lt;a class="anchor" href="#%e5%85%a8%e5%b1%80%e9%85%8d%e7%bd%ae"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在这个package 导入后，它会自动创建一个全局的配置文件 &lt;code&gt;Assets/RealTimeAreaLights/ltcconfig.asset&lt;/code&gt;, 以及一个 hlsl 的头文件 &lt;code&gt;ltcconfig.hlsl&lt;/code&gt;.&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/ltcconfig_dir.png" title="config asset path" /&gt;
&lt;/label&gt;
&lt;p&gt;ltcconfig.asset 上有一些选项用于打开关闭部分功能或者效果。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/ltcconfig_inspector.png" title="config asset options" /&gt;
&lt;/label&gt;
&lt;p&gt;&lt;code&gt;ltcconfig.hlsl&lt;/code&gt; 是根据 ltcconfig.asset 的选项自动生成的, 要确保点击 &lt;code&gt;Regenerate Config HLSL&lt;/code&gt; 按钮来使得配置选项的修改生效。&lt;/p&gt;
&lt;blockquote class='book-hint caution'&gt;
&lt;p&gt;&lt;code&gt;ltcconfig.hlsl&lt;/code&gt; 被本资源包的 shader 所引用，不要移除或者改变它的路径，否则会导致 shader 编译错误。&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id="enable-polygonlineartextured-light"&gt;Enable Polygon/Linear/Textured Light&lt;a class="anchor" href="#enable-polygonlineartextured-light"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;如果在你的场景中从未使用某些光源类型，你可以把它们关掉，这样一部分 shader 代码会被宏定义所屏蔽。通过这个方式可以尽量减少 shader 的指令数量，有助于提升 GP U的性能。&lt;/p&gt;
&lt;h3 id="textured-flip-horizontal"&gt;Textured Flip Horizontal&lt;a class="anchor" href="#textured-flip-horizontal"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;这个选项会在水平方向翻转纹理光源的效果，如果你发现纹理光源的反射和对应的贴图矩形相反，可以调整这个选项。&lt;/p&gt;
&lt;h3 id="use-perceptual-roughness"&gt;Use Perceptual Roughness&lt;a class="anchor" href="#use-perceptual-roughness"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;影响粗糙度的计算，perceptual roughness 等于 roughness 的平方，它比 roughness 变化更快，根据你的习惯选择使用哪种粗糙度计算。&lt;/p&gt;</description></item></channel></rss>