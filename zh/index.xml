<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PetaBytes</title><link>http://yaotouge.github.io/zh/</link><description>Recent content on PetaBytes</description><generator>Hugo</generator><language>zh</language><atom:link href="http://yaotouge.github.io/zh/index.xml" rel="self" type="application/rss+xml"/><item><title>多边形光源</title><link>http://yaotouge.github.io/zh/docs/ltclight/light_types/polygon_light/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/light_types/polygon_light/</guid><description>&lt;h2 id="多边形光源"&gt;多边形光源&lt;a class="anchor" href="#%e5%a4%9a%e8%be%b9%e5%bd%a2%e5%85%89%e6%ba%90"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;多边形光源适用于模拟单色面光源，例如室内场景的窗户、室外的自发光造型等。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/polygon_type.png" alt="Polygon Light"loading="lazy"title="Polygon Light" /&gt;
&lt;/label&gt;
&lt;p&gt;多边形光源的形状由一组多边形顶点定义，你可以使用预设多边形来修改其形状。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/polygon_preset.png" alt="preset polygon"loading="lazy"title="preset polygon" /&gt;
&lt;/label&gt;
&lt;p&gt;也可以为其自定义形状。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/customize_polygon.png" alt="customize polygon"loading="lazy"title="customize polygon" /&gt;
&lt;/label&gt;
&lt;blockquote class='book-hint caution'&gt;
&lt;p&gt;多边形形状的中心应与transform 一致。&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote class='book-hint caution'&gt;
&lt;p&gt;建议设置的多边形顶点为共面的（即二维多边形）。&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id="属性说明"&gt;属性说明&lt;a class="anchor" href="#%e5%b1%9e%e6%80%a7%e8%af%b4%e6%98%8e"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Range（范围）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;指包围球的半径，球体范围外的区域不会被该光源照亮。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-3"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-3" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/polygon_range.png" alt="polygon range"loading="lazy"title="polygon range" /&gt;
&lt;/label&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Double Sided（双面发光）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;启用双面发光的光源会同时照亮多边形的正面和背面；若不启用，则仅正面会被照亮。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-4"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-4" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/polygon_double_sided.png" alt="double sided"loading="lazy"title="double sided" /&gt;
&lt;/label&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;PolygonPoints（多边形顶点）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;你可以为该属性指定一组自定义多边形的顶点数据，这些顶点需构成二维多边形，且中心要与变换位置重合。&lt;/p&gt;
&lt;blockquote class='book-hint info'&gt;
&lt;p&gt;正面方向向量 &lt;span class="book-katex"&gt;\( \vec {f} \)&lt;/span&gt;&lt;link rel="stylesheet" href="http://yaotouge.github.io/katex/katex.min.css" /&gt;&lt;script defer src="http://yaotouge.github.io/katex/katex.min.js"&gt;&lt;/script&gt;&lt;script defer src="http://yaotouge.github.io/katex/auto-render.min.js" onload="renderMathInElement(document.body, {&amp;#34;delimiters&amp;#34;:[{&amp;#34;left&amp;#34;:&amp;#34;$$&amp;#34;,&amp;#34;right&amp;#34;:&amp;#34;$$&amp;#34;,&amp;#34;display&amp;#34;:true},{&amp;#34;left&amp;#34;:&amp;#34;\\(&amp;#34;,&amp;#34;right&amp;#34;:&amp;#34;\\)&amp;#34;,&amp;#34;display&amp;#34;:false},{&amp;#34;left&amp;#34;:&amp;#34;\\[&amp;#34;,&amp;#34;right&amp;#34;:&amp;#34;\\]&amp;#34;,&amp;#34;display&amp;#34;:true}]});"&gt;&lt;/script&gt; 由中心点 &lt;span class="book-katex"&gt;\( o \)&lt;/span&gt;（若使用世界坐标则为原点，否则为 transform 位置）和多边形顶点计算得出。其中 &lt;span class="book-katex"&gt;\( a \)&lt;/span&gt; 和 &lt;span class="book-katex"&gt;\( b \)&lt;/span&gt; 是多边形上两个连续的顶点。
计算公式：&lt;/p&gt;
&lt;span class="book-katex"&gt;\( \vec {f}=\vec {oa} \times \vec {ob} \)&lt;/span&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;Preset（预设形状）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>示例</title><link>http://yaotouge.github.io/zh/docs/ltclight/sample/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/sample/</guid><description>&lt;h2 id="示例"&gt;示例&lt;a class="anchor" href="#%e7%a4%ba%e4%be%8b"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;该资源包内包含两个示例，你可以在包管理器的示例标签页中导入并体验。&lt;/p&gt;
&lt;blockquote class='book-hint note'&gt;
&lt;p&gt;Samples 标签似乎只有是 import from disk 导入的 package 才会显示，对于直接从 Asset Store 下载的 package 没有这个标签。&lt;/p&gt;&lt;/blockquote&gt;&lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/package_sample_tab.png" alt="示例标签页"loading="lazy"title="示例标签页" /&gt;
&lt;/label&gt;
&lt;p&gt;若未显示示例标签页，你也可以将 &lt;code&gt;Realtime Area Lights/Samples~&lt;/code&gt; 文件夹复制到 Assets 目录下。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/samples_dir.png" alt="示例目录"loading="lazy"title="示例目录" /&gt;
&lt;/label&gt;
&lt;h3 id="shader-graph-示例"&gt;Shader Graph 示例&lt;a class="anchor" href="#shader-graph-%e7%a4%ba%e4%be%8b"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;本示例展示了如何自定义Shader Graph，使其支持 LTC 光照。&lt;/p&gt;
&lt;p&gt;进入 Play 模式后，光源生成器会在随机位置随机生成多边形光源或线性光源；同时场景中还存在一个顶点实时变化的多边形光源，以此演示如何在运行时设置多边形光源的形状。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/shadergraph_demo.png" alt="着色器图演示"loading="lazy"title="着色器图演示" /&gt;
&lt;/label&gt;
&lt;h3 id="shader-代码示例"&gt;Shader 代码示例&lt;a class="anchor" href="#shader-%e4%bb%a3%e7%a0%81%e7%a4%ba%e4%be%8b"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;本示例展示了如何自定义手写着色器，使其支持 LTC 光照。&lt;/p&gt;
&lt;p&gt;其中的亮点功能，是通过线性光源结合物理射线检测模拟实现的激光束效果。Play 模式下，激光束会进行旋转，并被障碍物遮挡截断。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-3"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-3" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/shadercode_demo.png" alt="着色器代码演示"loading="lazy"title="着色器代码演示" /&gt;
&lt;/label&gt;</description></item><item><title>集成到项目</title><link>http://yaotouge.github.io/zh/docs/ltclight/integration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/integration/</guid><description>&lt;h2 id="集成到项目"&gt;集成到项目&lt;a class="anchor" href="#%e9%9b%86%e6%88%90%e5%88%b0%e9%a1%b9%e7%9b%ae"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;无论你使用的是自定义渲染管线（SRP） 还是官方的通用渲染管线（URP），本工具在Shader Graph 和手写着色器代码两种开发方式下的集成流程都极为简便。&lt;/p&gt;
&lt;blockquote class='book-hint note'&gt;
&lt;p&gt;本工具集在多数情况下是独立于渲染管线运行的。其工作原理是从渲染管线中提取粗糙度、法线、金属度等表面参数，完成光照计算后，再将计算结果叠加到原始渲染输出上。&lt;/p&gt;&lt;/blockquote&gt;&lt;div class="book-steps"&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;h3 id="添加-ltclightmanager"&gt;添加 LTCLightManager&lt;a class="anchor" href="#%e6%b7%bb%e5%8a%a0-ltclightmanager"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;若要使用 LTC 光照，场景中必须且只能存在一个&lt;code&gt;LTCLightManager&lt;/code&gt;实例。你可以创建一个空游戏对象，然后为其添加&lt;code&gt;LTCLightManager&lt;/code&gt;组件。&lt;/p&gt;
 &lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/LTCLightManager.png" alt="LTCLightManager"loading="lazy"title="LTCLightManager" /&gt;
 &lt;/label&gt;
&lt;p&gt;PrefilterTexture着色器的路径如下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Real Time Area Lights/Shaders/PrefilterTexture.shader&lt;/code&gt;. 该着色器用于纹理面光源功能，需将其指定给LTCLightManager组件。&lt;/p&gt;
&lt;p&gt;你也可以直接使用预制件 Prefabs/LTCManager.prefab，无需额外配置。&lt;/p&gt;
 &lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/LTCLightManager_prefab.png" alt="LTCLightManager Prefab"loading="lazy"title="LTCLightManager Prefab" /&gt;
 &lt;/label&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h3 id="着色器修改"&gt;着色器修改&lt;a class="anchor" href="#%e7%9d%80%e8%89%b2%e5%99%a8%e4%bf%ae%e6%94%b9"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;下一步需要对着色器进行简单修改，使材质能够接收 LTC 光照。&lt;/p&gt;
&lt;h4 id="shader-graph"&gt;Shader Graph&lt;a class="anchor" href="#shader-graph"&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;目前无法直接拦截片段着色器阶段的光照计算流程，但可以将 LTC 附加光照的计算结果连接到自发光通道（Emission Channel），该通道的输出最终会叠加到整体光照结果中。&lt;/p&gt;
 &lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/shadergraph_sample.png" alt="shadergraphsample"loading="lazy"title="shadergraphsample" /&gt;
 &lt;/label&gt;
&lt;p&gt;操作方法：在 Shader Graph 中创建一个 LTCLighting 节点（该节点已包含在本工具集中），为其接入与Fragment block 几乎完全一致的输入，最后将节点输出连接 Fragment Block 的自发光端口。 &lt;a href="http://yaotouge.github.io/zh/docs/ltclight/sample/#shader-graph-%e7%a4%ba%e4%be%8b"&gt;参考 ShaderGraph 示例&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id="shader-代码"&gt;Shader 代码&lt;a class="anchor" href="#shader-%e4%bb%a3%e7%a0%81"&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;对于手写的着色器，扩展 LTC 光照支持同样便捷。工具集已提供辅助函数，可将 URP 标准光照着色器的输入参数转换为 LTC 光照所需的格式 —— 实际上二者的参数结构基本一致。&lt;/p&gt;
&lt;p&gt;以 URP 标准光照着色器为例，首先在LitForwardPass.hlsl文件中引入 LTC 着色器头文件：&lt;/p&gt;</description></item><item><title>纹理面光源</title><link>http://yaotouge.github.io/zh/docs/ltclight/light_types/textured_light/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/light_types/textured_light/</guid><description>&lt;h2 id="纹理面光源"&gt;纹理面光源&lt;a class="anchor" href="#%e7%ba%b9%e7%90%86%e9%9d%a2%e5%85%89%e6%ba%90"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;纹理光源本质上是一种矩形面光源，区别在于它并非单色光源。&lt;/p&gt;
&lt;p&gt;光源上每个采样点的辐射亮度由纹理中对应纹素的颜色决定。这一特性极大地拓展了面光源的应用场景，因为现实世界中绝大多数面光源都带有丰富色彩，例如广告牌、电子屏幕等。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/textured_radiance.png" alt="textured radiance"loading="lazy"title="Textured Radiance" /&gt;
&lt;/label&gt;
&lt;p&gt;为了模拟材质表面的粗糙质感，我们会采用不同尺寸的高斯模糊核对纹理进行预滤波处理，并将处理后的结果存储在纹理的 Mipmap 中。对于静态纹理，预滤波操作可在初始一次性完成；而对于实时变化的RenderTexture，则需要每帧执行预滤波。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/prefilter.png" alt="prefilter"loading="lazy"title="prefilter" /&gt;
&lt;/label&gt;
&lt;p&gt;所有经过预滤波处理的纹理结果，都会被存储在一张纹理图集内。该图集的分辨率为 2048×2048，内部划分为 4×4 的单元格网格，每个单元格用于存放一张纹理的预滤波数据。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/prefilter_atlas.png" alt="prefilter atlas"loading="lazy"title="prefilter atlas" /&gt;
&lt;/label&gt;
&lt;blockquote class='book-hint note'&gt;
&lt;p&gt;目前所有纹理对应的单元格尺寸均为固定值。这意味着无论原始纹理的分辨率和宽高比如何，都会被拉伸到 512×512 的单元格中。对于分辨率超过 512×512 的纹理而言，其过高的分辨率并不会对纹理光源的最终效果产生任何增益。&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote class='book-hint caution'&gt;
&lt;p&gt;若原始纹理的宽高比与 1:1 相差过大，生成的纹理光源可能会在某一维度上出现分辨率损失的问题。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-3"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-3" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/stretch_alias.png" alt="stretched"loading="lazy"title="stretched" /&gt;
&lt;/label&gt;
&lt;p&gt;未来需实现一套更灵活的图集分配算法，以适配不同分辨率和宽高比的纹理资源。&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id="属性说明"&gt;属性说明&lt;a class="anchor" href="#%e5%b1%9e%e6%80%a7%e8%af%b4%e6%98%8e"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;IsRealTime（是否实时滤波）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;若设为 true，纹理预滤波操作将逐帧执行，这会带来额外的性能开销。该属性适用于内容持续变化的场景，例如视频纹理。&lt;/p&gt;
&lt;blockquote class='book-hint caution'&gt;
&lt;p&gt;对于静态纹理，务必将 IsRealTime 设为 false，否则会造成不必要的性能浪费。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;Texture（纹理资源）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;指定当前纹理光源所使用的纹理，既可以是静态的 Texture2D 纹理资源，也可以是运行时动态生成的 RenderTexture 渲染纹理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Width（宽度）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;纹理光源的物理宽度。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Height（高度）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;纹理光源的物理高度。&lt;/p&gt;</description></item><item><title>线光源</title><link>http://yaotouge.github.io/zh/docs/ltclight/light_types/linear_light/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://yaotouge.github.io/zh/docs/ltclight/light_types/linear_light/</guid><description>&lt;h2 id="线光源"&gt;线光源&lt;a class="anchor" href="#%e7%ba%bf%e5%85%89%e6%ba%90"&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;线光源用于模拟呈线条形态的光线，例如激光束、光剑、光带等。&lt;/p&gt;
&lt;p&gt;其形态与多边形光源略有区别，线光源的形态仅由两点决定：起点和终点，光照范围呈胶囊状。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-0"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-0" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/tube_type.png" alt="tube light"title="tube light" /&gt;
&lt;/label&gt;
&lt;h3 id="属性说明"&gt;属性说明&lt;a class="anchor" href="#%e5%b1%9e%e6%80%a7%e8%af%b4%e6%98%8e"&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Range（照射范围）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;胶囊状区域的半径，决定了两端半球与中间柱体的半径大小，胶囊区域外的范围不会被照亮。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-1"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-1" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/tube_range.gif" alt="tube range"title="tube range" /&gt;
&lt;/label&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Start Point（起点）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;线光源的起始端点，同时也是起始端半球的球心。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;End Point（终点）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;线光源的终止端点，同时也是终止端半球的球心。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Radius（光源半径）&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;与&lt;strong&gt;照射范围（Range）&lt;/strong&gt; 无关联，指的是线光源本身的粗细，光源越粗，亮度越高。&lt;/p&gt;
&lt;label class="book-image" for="book-image-toggle-2"&gt;
 &lt;input class="hidden toggle" type="checkbox" id="book-image-toggle-2" /&gt;
 &lt;img src="http://yaotouge.github.io/imgs/tube_radius.gif" alt="linear light radius" /&gt;
&lt;/label&gt;</description></item></channel></rss>