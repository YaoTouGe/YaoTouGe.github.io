[{"id":0,"href":"/docs/ltclight/light_types/polygon_light/","title":"Polygon Light","section":"LTC Light Types","content":"Polygon Light# Polygon light is useful to simulate monochromatic area light, such as window of indoor scene, outdoor emissive shapes.\nThe shape of polygon light is described by a list of polygon vertices, you can change the shape use preset polygons.\nOr assign an customized shape to it.\nPolygon shape should be centered at transform position.\nIt\u0026rsquo;s suggested to make polygon vertices coplanar (2D polygon).\nAttributes# Range\nThe radius of bounding sphere, places outside the sphere will not be lighted.\nDouble Sided\nA double sided light will light up both front and back side of the polygon. Otherwise only the front side receives lighting.\nPolygonPoints\nYou can assign a list of customized polygon shapes to this attribute, the polygon points should be 2D polygon, and centered at transform position.\nThe front direction \\( \\vec{f} \\) is calculted from center \\( o \\) (transform position or origin if use world position) and polygon vertices. \\( a \\) and \\( b \\) are two consecutive vertices of polygon.\n\\( \\vec{f}=\\vec{oa} \\times \\vec{ob} \\)Preset\nSome preset polygon shapes like pentagon, hexagon, etc. It\u0026rsquo;s an editor only attribute for convenience, not accessable at runtime.\n"},{"id":1,"href":"/docs/ltclight/sample/","title":"Samples","section":"LTC Real Time Area Lights","content":"Samples# There are two samples in package, you can import them from PackageManager\u0026rsquo;s Samples tab and play around.\nIt seems that the Samples tab is only visible if the package is imported from disk. If it is downloaded from asset store directly, there will not be Samples tab.\nIf no Samples tab appears, you can also copy Realtime Area Lights/Samples~ folder to Assets.\nShader Graph Sample# It demonstrates how to customize a shader graph to make it receives LTC lighting.\nWhen enter play mode, the light spawner will spawn polygon lights or linear lights randomly at random place, and there is also a polygon light whose polygon vertices is changing, shows how to set polygon light shapes at runtime.\nShader Code Sample# It demonstrates how to customize a hand written shader to make it receives LTC lighting.\nThe interesting part is the lazer beam simulated by a linear light combined with physics raycasting, which rotates around in play mode, and it will be clipped by obstacles.\n"},{"id":2,"href":"/docs/ltclight/integration/","title":"Integration","section":"LTC Real Time Area Lights","content":"Integration# The integration process is extreamely easy for both shader graph and shader code, no matter you are using an customized SRP render pipeline, or the offical Universal Render Pipeline.\nThis package works in isolation with render pipeline in most of the time, it extract surface parameters like roughtness, normal, metallic and so on from the render pipeline, do lighting calculation, then add the result back to the original render result.\nAdd LTCLightManager# In order to use LTC lights, there must exist one and only one LTCLightManager instance in scene. Create an empty game object, and add LTCLightManger component to it.\nThe PrefilterTexture shader is located in\nReal Time Area Lights/Shaders/PrefilterTexture.shader. It is used for Textured Light, and should be assigned to LTCLightManager.\nOr you can use the Prefabs/LTCManager.prefab directly without additional setup.\nShader Modification# In the next step, minor shader modification is needed to make materials receiving LTC lighting with.\nFor Shader Graph# There is no way for us to intercept the lighting process of fragment block, but we can connect our additional lighting to the emission channel, which will be added to the final lighting result.\nSo you need to create a LTCLighting node (inclued in this package) in shader graph, get input channels which is almost identical with fragment block, and link output to fragment block\u0026rsquo;s emission. Refer to the ShaderGraph sample.\nFor Shader Code# It\u0026rsquo;s also convenient to extend your hand written shaders to receive LTC lighting, there already exists helper functions to convert URP\u0026rsquo;s lit shader input to LTC lighting input, actually they are quite the same.\nUse URP lit as an example, firstly we should include LTC shaders in LitForwardPass.hlsl:\n#include \u0026#34;Packages/com.petabytes.ltclight/Shaders/LTC_URP.hlsl\u0026#34;Then add LTC lighting after URP\u0026rsquo;s PBR calculation:\n// For example in LitForwardPass.hlsl InitializeBakedGIData(input, inputData); half4 color = UniversalFragmentPBR(inputData, surfaceData); // Add LTC lighting here color.rgb += CalculateFragmentLTC(inputData, surfaceData);Refer to the shader code sample.\nAdd LTC Light Components# The last step is adding LTC light instances in your scene.\nYou can create an empty GameObject, and add LTC components to it, there three types of lights can be used directly:\nLTC Linear Light\nLTC Polygon Light\nLTC Textured Light:\nLTC Light is the base class of above three light types, it can\u0026rsquo;t be used directly.\nOr use the light prefabs in Real Time Area Lights/Prefabs directory:\nCustomized Render Pipeline# For customized render pipeline, you need to provide the same data as URP\u0026rsquo;s inputData and surfaceData. Then modify your shader the similar way as For Shader Code.\nSpecular and Metallic Workflow# You may use specular or metallic workflow in asset authoring, this package adapts well for both:\nURP Shader Graph If you are integrating into URP shadergraph, connect to the corresponding input channel according to your workflow:\nURP Shader Code If you are integrating to URP shader code, the URP shader has already taken this into consideration.\nCustomized Render Pipeline For customized render pipeline, you should do the conversion between metallic and specular when offering surface data to LTC calculate function, take URP InitializeBRDFData as a reference.\n"},{"id":3,"href":"/docs/ltclight/light_types/","title":"LTC Light Types","section":"LTC Real Time Area Lights","content":"LTC Lights# Currently this package supports polygon light, linear light and textured area light. More types will be added in the future such as bezier curve shaped area lights.\nEach light type have a corresponding component which can be added to game object, just like the built-in light components.\nAttributes# These are common attributes for all light types:\nColor\nLight color in RGB value.\nFor textured light, this color will be multiplied with texture color.\nSpecular|Diffuse Intensity\nLight intensity is a multiplier to lighting result, it is composed of diffuse and specular, which can be controlled saperately.\nRange\nThe space range affected by light, it has different meaning for different light types, It will not be affected by transform scale, can be visualized in gizmo when selected.\nLight Mode\nThe light calculation contains two parts: diffuse and specular. Although they can be modulated by metallic, you can choose to use diffuse only, specular only or both of them for special use case.\nSpecular and Diffuse\nDiffuse only\nSpecular only\nUse World Position\nUse object local space or world space for light vertices, transform will be ignored if true. This is useful if light vertices is in world space. Like the lazer beam in shader code sample.\n"},{"id":4,"href":"/docs/ltclight/global_config/","title":"Global Configuration","section":"LTC Real Time Area Lights","content":"Global Configuration# After this package is imported, a configuration asset will be created automatically at Assets/RealTimeAreaLights/ltcconfig.asset, and a hlsl header file named ltcconfig.hlsl.\nThere are some options on ltcconfig.asset to let you turn on/off the functionality or effects.\nltcconfig.hlsl is generated according to ltcconfig.asset options, make sure click the Regenerate Config HLSL button after you change options.\nltcconfig.hlsl is included by shader of this package, don\u0026rsquo;t remove it or change its directory. Otherwise shader may compile failed.\nEnable Polygon/Linear/Textured Light# If some light types will never be used in your scene, you can turn off them by uncheck the option, part of the shader code will be eliminated by macro defines. In this way you can keep the shader instructions as small as possible, which may improve GPU performance.\nTextured Flip Horizontal# This option controls horizontal flip of textured light, adjust it if you find your textured reflection is inversed horizontally with the textured rectangular mesh.\nUse Perceptual Roughness# It affects which roughness is used in Physically Based Rendering process, perceptual roughness is power of 2 of roughness, it changes more rapidly when smoothness changes from 1 to 0.\n"},{"id":5,"href":"/docs/ltclight/light_types/linear_light/","title":"Linear Light","section":"LTC Light Types","content":"Linear Light# Linear light is to simulate light with line shapes, such as laser beam, light sword, light stripes.\nIt\u0026rsquo;s shape is slightly different from polygon light, linear light\u0026rsquo;s shape is determined by only two points: start and end point, its lighting range is a capsule shape.\nAttributes# Range\nThe radius of a capsule shape, it determines the radius of caps and tube, places outside the capsule will not be lighted.\nStart Point\nThe start point of linear light, the center of start cap\nEnd Point\nThe end point of linear light, the center of end cap.\nRadius\nIt is not related to Range, it\u0026rsquo;s the thickness of the linear light, the thicker the brighter.\n"},{"id":6,"href":"/docs/ltclight/","title":"LTC Real Time Area Lights","section":"Docs","content":"User Guide# WebGL demo.\nThis document will guide you through the usage of Real Time Area Lights package. This package extends Unity\u0026rsquo;s lighting system with area light support. Here are showcases for different light type:\nPolygon light:\nLinear light:\nTextured light:\nArea Light# Traditional lighting calculation abstracts light source as a point without volume at some position (spot light, point light, etc.) or at infinite distance (directional light). This abstraction simplify calculation for real time graphics.\nHowever, light source in real world isn\u0026rsquo;t infinite small, the difference would become apparent when light source is relatively large. In order to achieve a visually correct result, the lighting algorithm would involve expensive method like Monte Carlo integration which is unaffordable for realtime application.\nLinearly Transformed Cosines# Linearly Transformed Cosines lead us a way to approximate area light with an anatical solution, we can get convincible result in constant time.\nThe author finds that we already have anatical solution for integrating a polygon on cosine spherical distribution, but cosine distribution is only correct for diffuse surfaces.\nOne step further, they creatively use a matrix to transform cosine distribution to physcailly based BRDFs (approximately), in other words, we can use the inverse transform to convert PBR BRDF to cosine spherical distribution, which has anatical solution.\nAnd finally, we transform the polygon from PBR BRDF space into the cosine spherical space, do the anatical polygon integration.\n"},{"id":7,"href":"/docs/ltclight/light_types/textured_light/","title":"Textured Light","section":"LTC Light Types","content":"Textured Light# Textured light is an rectangular polygon light itself except that it\u0026rsquo;s not monochromatic.\nThe radiance at each point is determined by texel in an texture. This extends polygon light a lot, since most area light source in real life is colorful, like billboard, screen.\nIn order to mimic roughness appearance, we will prefilter the texture with different gaussian blur kernel size and store them in texture mipmaps. The prefilter process can be executed once at start up for static textures, or per-frame for realtime changed render textures.\nAll prefiltered results are stored in an texture atlas, the altas texture is 2048 x 2048, splitted in 4 x 4 cells for each texture.\nCurrently the cell size is fixed for all textures, that means not matter what the original texture resolution and aspect ration is, it will be fitted into an 512 x 512 cell. Texture with resoltion higher than 512 x 512 will make no difference for textured light.\nIf original texture\u0026rsquo;s aspect ratio is far from 1:1, the resulted texture light may lose resolution in one dimension.\nA more flexible atlas allocation algorithm should be implemented for textures with different resolution and aspect ratio in the future.\nAttributes# IsRealTime\nIf true, the texture prefiltering process will be executed each frame, which brings additional cost. Use it for content which is always changing, such as video textures.\nStatic textures should set IsRealTime to false, otherwise it will be prefiltered each frame even its content is the same, waste GPU resources.\nTexture\nThe texture of this light, it can be a static Texture2D, or runtime generated RenderTexture.\nIf texture is none, textured light will use default white texture, behaves like rectangular polygon light. You can still adjust color of it.\nWidth\nThe width of textured light.\nHeight\nThe height of textured light.\nBarn Door\nThere is a special attribute for textured light named barn door, it controls the barn door around textured light and affect how much area it can lit.\nBarn Door Length is how long the barn door is. The longer it is, more light will be occluded.\nBarn Door Angle is angle of barn door. it ranges from 0 to 90.\n"}]